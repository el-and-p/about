define(["jquery","pubsub"],function(t){var i,e,n,o;return{init:function(){i=this,n=t(".js-modal--inline"),e=t(".js-grid"),o=t(".js-modal__close"),this._initSubscriptions(),this._initEvents()},_initSubscriptions:function(){t.subscribe("/modal/show",this._positionAndShowModal),t.subscribe("/modal/resize",this._positionAndShowModal),t.subscribe("/content/ready",this._loadContent)},_initEvents:function(){o.on("click",this._closeModal)},_positionAndShowModal:function(t){i._positionModal(t.offset),i._setArrow(t.position),i._setSpacingForModal(),i._showModal(),i._scrollToItem(n),setTimeout(function(){i._lazyLoadImages(n)},500)},_loadContent:function(i){var e=i.html;n.find(".js-modal__body").empty().append(e),t.publish("/detail/init")},_positionModal:function(t){n.css("top",t)},_setSpacingForModal:function(){n.css({visibility:"hidden",display:"block"}),setTimeout(function(){e.find(".js-grid__item.is-selected").css({"margin-bottom":n.outerHeight()+60})},400),n.css({visibility:"visible",display:"none"})},_setArrow:function(t){n[0].className=n[0].className.replace(/arrow\-(one|two|three)+\-(left|center|right)+/gi,""),n.addClass(t)},_closeModal:function(){var t=e.find(".js-grid__item.is-selected");i._scrollToItem(t),t.removeClass("is-selected").attr("style",""),e.find(".js-grid__item--end").removeClass("js-grid__item--end"),i._hideModal()},_showModal:function(){n.show()},_hideModal:function(){n.hide()},_scrollToItem:function(i){t.publish("/scroller/move",[{element:i}])},_lazyLoadImages:function(){var i=n.find(".js-modal__body").find("img");i.length&&t.publish("/lazyload/image",[i])}}});
//# sourceMappingURL=modal.js.map