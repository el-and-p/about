!function(t){function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===u.call(t)}function i(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var i=0,r=t.length;r>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,n){function r(t,n,s){if(!(this instanceof r))return new r(t,n);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=i(t),this.options=e({},this.options),"function"==typeof n?s=n:e(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function u(t){this.img=t}r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(t){var e=new u(t);this.images.push(e)},r.prototype.check=function(){function t(t,r){return e.options.debug&&a&&s.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify(e,t)})},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var n=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[n](e)}})},o&&(o.fn.imagesLoaded=function(t,e){var n=new r(this,t,e);return n.jqDeferred.promise(o(this))});var d={};return u.prototype=new t,u.prototype.check=function(){var t=d[this.img.src];if(t)return this.useCached(t),void 0;if(d[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var e=this.proxyImage=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.img.src},u.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},u.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},u.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},u.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=t.jQuery,s=t.console,a="undefined"!=typeof s,u=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],r):t.imagesLoaded=r(t.EventEmitter,t.eventie)}(window);
//# sourceMappingURL=imagesloaded.js.map