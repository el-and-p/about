define(["jquery","pubsub","throttledebounce"],function(t){var e,i,n,o;return{init:function(){e=this,i=t(".js-grid__item"),o=t(".js-modal--inline"),this._initEvents(),this._initSubscriptions()},_initEvents:function(){t(window).on("resize",t.throttle(250,this._resizeGrid))},_initSubscriptions:function(){t.subscribe("/content/new",this._processNewContentEvent)},_resizeGrid:function(){var o=i.filter(".is-selected");if(o.length){var s={index:i.index(o)};e._generatePositioningData(s,!1),t.publish("/modal/resize",[n])}},_processNewContentEvent:function(i){e._generatePositioningData(i,!0),t.publish("/modal/show",[n])},_generatePositioningData:function(t,o){var s=t.index,r=i.eq(s),a=e._getLastItemInRow(r);o&&e._cleanUpPreviousItem(),e._setCurrentClass(r),e._setLastClass(a),n=e._getLastItemData(a,r)},_cleanUpPreviousItem:function(){i.filter(".is-selected").attr("style","").removeClass("is-selected"),i.filter(".js-grid__item--end").removeClass("js-grid__item--end")},_setCurrentClass:function(t){t.addClass("is-selected")},_getLastItemInRow:function(e){var i=e,n=e.nextAll(),o=e.offset().top;return n.each(function(){var e=t(this),n=e.offset().top;return n!=o?(i=e,!1):(e.next().length||(i=e),void 0)}),n.length?i.prev():i},_setLastClass:function(t){t.addClass("js-grid__item--end")},_getLastItemData:function(t,e){var i={},n=t.offset().top,s=t.outerHeight();o.outerHeight(),o.offset().top,e.position().top;var r=n+s+40;return i.offset=r,i.position=this._getClickedItemPosition(e),i},_getClickedItemPosition:function(e){var n={"arrow-one-0":"arrow-one-center","arrow-two-0":"arrow-two-left","arrow-two-1":"arrow-two-right","arrow-three-0":"arrow-three-left","arrow-three-1":"arrow-three-center","arrow-three-2":"arrow-three-right"},o=e.offset().top;$rowItems=i.filter(function(){return t(this).offset().top===o});var s=$rowItems.index(e);return 3===$rowItems.length?n["arrow-three-"+s]:2===$rowItems.length?n["arrow-two-"+s]:n["arrow-one-"+s]}}});
//# sourceMappingURL=positioner.js.map